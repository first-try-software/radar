<%
  project_record = local_assigns[:project_record]
%>

<div class="modal-overlay"
     data-edit-form-target="modal"
     data-action="click->edit-form#closeOnBackdrop keydown.escape@document->edit-form#close"
     hidden>
  <div class="modal">
    <div class="modal__header">
      <h3>Edit Project</h3>
    </div>
    <%= form_with model: project_record,
                  url: project_path(project_record),
                  method: :patch,
                  local: false,
                  class: "edit-project-form",
                  data: { edit_form_target: "form", action: "submit->edit-form#submit" } do |f| %>
      <div class="modal__body">
        <div class="form-field">
          <label for="project_name" class="form-field__label">Name</label>
          <input type="text" id="project_name" name="project[name]" class="form-field__input" value="<%= project_record.name %>" required>
        </div>
        <div class="form-field">
          <label for="project_description" class="form-field__label">Brief Description</label>
          <input type="text" id="project_description" name="project[description]" class="form-field__input" value="<%= project_record.description %>">
        </div>
        <div class="form-field">
          <label for="project_point_of_contact" class="form-field__label">Contact(s)</label>
          <input type="text" id="project_point_of_contact" name="project[point_of_contact]" class="form-field__input" value="<%= project_record.point_of_contact %>">
        </div>
        <div class="form-field form-field--archive">
          <span class="form-field__label">Archive this project and remove it from view?</span>
          <label class="checkbox-field">
            <input type="hidden" name="project[archived]" value="0">
            <input type="checkbox"
                   name="project[archived]"
                   value="1"
                   class="checkbox-field__input"
                   <%= 'checked' if project_record.archived %>
                   data-edit-form-target="archiveCheckbox"
                   data-action="change->edit-form#updateArchiveLabel">
            <span class="checkbox-field__box"></span>
            <span class="checkbox-field__label" data-edit-form-target="archiveLabel"><%= project_record.archived ? 'This project is archived and hidden.' : 'Click checkbox to archive' %></span>
          </label>
        </div>
      </div>
      <div class="modal__actions">
        <button type="button" class="btn secondary" data-action="edit-form#close">Cancel</button>
        <button type="submit" class="btn" data-edit-form-target="saveButton">Save</button>
      </div>
    <% end %>
  </div>
</div>
