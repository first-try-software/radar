<%# Shared health widget partial for Team, Initiative, and Project pages
    Expects: presenter (HealthPresenter) %>
<% presenter = local_assigns[:presenter] %>

<div id="health-widget" class="metric-widget metric-widget--health metric-widget--<%= presenter.health_css_class %>">
  <div class="metric-widget__title-row">
    <span class="metric-widget__title">Current Health</span>
    <div class="info-tooltip">
      <span class="info-tooltip__icon">i</span>
      <div class="info-tooltip__tooltip">
        <div class="info-tooltip__methodology"><%= presenter.methodology %></div>
        <div class="info-tooltip__range">
          <div>On Track = +1</div>
          <div>At Risk = 0</div>
          <div>Off Track = âˆ’1</div>
        </div>
        <div class="info-tooltip__score">Score: <%= presenter.raw_score_display %></div>
      </div>
    </div>
  </div>
  <div class="metric-widget__content">
    <span class="metric-widget__dot metric-widget__dot--<%= presenter.health_css_class %>"></span>
    <div class="metric-widget__text">
      <div class="metric-widget__label metric-widget__label--<%= presenter.health_css_class %>"><%= presenter.health_label %></div>
      <% if presenter.show_off_track_detail? %>
        <div class="metric-widget__detail"><%= presenter.off_track_detail %></div>
      <% elsif presenter.show_at_risk_detail? %>
        <div class="metric-widget__detail"><%= presenter.at_risk_detail %></div>
      <% end %>
    </div>
  </div>
</div>
